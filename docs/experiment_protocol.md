# 実験プロトコル（記事向け）

## 1. 実験の狙い（読者に見せたい絵）
- 同じ質問でも、LLMは常に同一の文字列を返すわけではない（確率的生成）
- 一見「間違いようがない」問いでも、ごく低頻度で逸脱が起きる
- その揺らぎを「木（trie）」として見せると直感的に伝わる

## 2. 推奨のプロンプト設計
### 2.1 出力を短く縛る（最重要）
- 例: "Just answer YES or NO. (質問...)"
- 目的: 余計な前置きや言い換えを減らし、分岐が読める形になる

### 2.2 逸脱率を適度に上げたい場合
- 誘導（leading question）を混ぜる / 紛らわしいが正解は一意の質問にする
- ただし「読者が納得する正解」を用意できるものに限る

## 3. 推奨パラメータ
- max_output_tokens: 3〜10 程度（YES/NOなら極小）
- temperature:
  - 揺らぎを見せたい: 0.2〜0.8
  - 逸脱の稀少性を見せたい: 0.0〜0.2（ただし完全固定になり得る）
- top_p: 基本は1.0（温度を使うなら top_p は触らない）
- seed:
  - **使わない**: 確率性を見せる
  - **使う**: 「同条件なら固定化できる（ただしバックエンド変更で崩れる可能性）」の補足ネタ

## 4. Nと並列数の目安
- N=10,000（予定）
- concurrency: まず20〜50で開始し、429が多ければ下げる

## 5. 逸脱（deviation）定義例
### 5.1 完全一致（最短）
- expected_answers=["YES","NO"] のどちらかに完全一致しなければ逸脱
- 正規化を使うなら:
  - 前後空白除去
  - 改行除去
  - "YES." の句点を除く（用途次第）

## 6. 成果物（記事に載せるもの）
- 逸脱率（deviation_rate）
- 最頻出回答と頻度
- 深さ別の分岐（entropyやtop_chars）
- 逸脱例の生ログ（数件）
- 分岐木（別途、解析スクリプトで図化する前提）
